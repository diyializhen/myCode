<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<textarea name="" id="text" cols="30" rows="10"></textarea>
<button type="button" id="clear">清除</button>
<div id="text-show" style="border:1px solid #ccc;min-height: 1.5em;"></div>
</body>
<script src="escapeHtml.js"></script>
<script>
    // 转译html字符串，防止XSS攻击。防止在使用innerHTML时出现问题
    /*
    * 参数1：html字符串
    * 参数2：Boolean,是否让回车替换成<br/>,空格替换成&nbsp;从而显示出多空格和换行效果
     */

    document.getElementById('text').onblur = function () {
        console.log(escapeHtml(this.value, true));
        document.getElementById('text-show').innerHTML = escapeHtml(this.value, true);
    }

    document.getElementById('clear').onclick = function () {
        document.getElementById('text').value = '';
        document.getElementById('text-show').innerHTML = '';
    }

</script>
</html>